# Room Database

It is an abstract of mysql database. It makes things simple from mySql database.

It contains 3 components:

1. Database (abstract class extending **RoomDatabase**)
2. Entity (Represents table or a Row in Database)
3. DAO (Every Entity needs a DAO (Data Access Object) Interface, It contains functions to access or manupolate our database)

**Room Database Transactions**

1. Create Database
2. Create Table
3. Add new Data (Insert)
4. Show data in app (Query)
5. Data Update (Update)
6. Data Delete (Delete)

### Architectural Room DataBase

1. UI Controller :- Display Data and forward on UI events (**View**)
2. LiveData(**ViewModel**) :- Holds all the data needed for UI. (UI is notified for changes in LiveData)
3. Repository :-  clean API for UI to communicate with.
4. Database (Room Database) :- Contains Entity and DAOs.





## Create an Entity Class

Create a class and just annotate it with `@Entity`. One can also define a name for the table by appending `@Entity` with `(tableName = "note_table")`. 

A particular value/column can be set as **primary key** with annotation `@PrimaryKey`. This will make sure that every value under this column is unique. This value can be autogenerated by using `@PrimaryKey(autoGenerate = true)`. 

```java
@Entity(tableName = "note_table")
public class Note {

    @PrimaryKey(autoGenerate = true)
    private int id;
    private String title;
    private String description;

    public Note(String title, String description) {
        this.title = title;
        this.description = description;
    }

    public int getId() {
        return id;
    }

    public String getTitle() {
        return title;
    }

    public String getDescription() {
        return description;
    }

    public void setId(int id) {
        this.id = id;
    }
}
```

 

## Create an DAO Interface (Data Access Object)

DAO is an interface annotated with `@Dao`. Here we will declare Database operations like `update, insert, query, delete`. There is no need to implement these methods in DAO interface. We don't need any implementation of these methods as DAO will automatically handle their implementation but we need to annotate these methods with `Insert, Update, Delete, Query` as below.

```java
@Dao
public interface NotesDAO {

    @Insert
    void insert(Note note);

    @Update
    void update(Note note);

    @Delete
    void delete(Note note);

    // below query will list all the notes from note_table
    // sorted in ascending order of id. DESC is for descending
    @Query("SELECT * FROM note_table ORDER BY id ASC")
    LiveData<List<Note>> getAllNotes();
}
```

For Query we need to write sql query to be called. It is good to use LiveData as these DataStructures will be observed by the application and any changes in their values will notify the adapter or activity using these.



## Create Database

We will create a Database class which will connect `Entity` with `Dao`. 





## Repository

Repository class is the one fetching data from a Database or a server. This is the bridge between Application UI and Data. Application UI doesn't care where the data come from it only cares about getting it from `Repository` 